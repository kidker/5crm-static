!function(){FIVE_CRM_GLOBAL.form={config:{path:{sendForm:FIVE_CRM_GLOBAL.common.api_path+"ctm/form/send"}},data:{},methods:{encodeQueryData:function(o){var e=[];for(var n in o)e.push(encodeURIComponent(n)+"="+encodeURIComponent(o[n]));return e.join("&")},getGenStaticData:function(){return"url="+encodeURIComponent(window.location.hostname)+"&public_token="+FIVE_CRM_GLOBAL.common.public_token},buildQueryData:function(){var o=this;return o.encodeQueryData(FIVE_CRM_GLOBAL.form.data)},getDataForSend:function(){var o=this;return FIVE_CRM_GLOBAL.form.config.path.sendForm+"?format=json&"+o.getGenStaticData()+"&"+o.buildQueryData()},send:function(o){var e=this;FIVE_CRM_GLOBAL.UtmForm.utmCookie.checkUTM(FIVE_CRM_GLOBAL.form.data),FIVE_CRM_GLOBAL.UtmForm.utmCookie.getGAID(FIVE_CRM_GLOBAL.form.data),FIVE_CRM_GLOBAL.UtmForm.utmCookie.jsonp.send(e.getDataForSend(),{onSuccess:function(o){o.ans||console.warn("[5CRM->widget->form->msg]: "+o.msg)}})}},countCustomFields:50,formFields:["name","surname","phone","email","description","sum"],checkLoadCommonJs:function(){var o=this;FIVE_CRM_GLOBAL.UtmForm.isInit?o.run():setTimeout(function(){o.checkLoadCommonJs()},300)},run:function(){for(var o=document.getElementsByClassName("five_crm_form"),e=0;e<o.length;e++)o[e].addEventListener("submit",function(o){FIVE_CRM_GLOBAL.form.data={};var e=this;FIVE_CRM_GLOBAL.form.formFields.forEach(function(o){e.elements[o]&&""!=e.elements[o].value&&(FIVE_CRM_GLOBAL.form.data[o]=e.elements[o].value)});for(var n,t=1;t<=FIVE_CRM_GLOBAL.form.countCustomFields;t++)n="f_"+t,e.elements[n]&&""!=e.elements[n].value&&(FIVE_CRM_GLOBAL.form.data[n]=e.elements[n].value);Object.keys(FIVE_CRM_GLOBAL.form.data).length>0&&FIVE_CRM_GLOBAL.form.methods.send(e)})},init:function(){var o=this;o.checkLoadCommonJs()}},FIVE_CRM_GLOBAL.form.init()}(window);